@model FirstProjectNET.Models.ViewModel.PropertiesViewModel
@{
    ViewData["Title"] = "Properties";
}
<style>
    .check-date{
        position:relative;
        margin-bottom:15px;
    }
    .check-date label{
            font-size: 14px;
            color: #707079;
            display: block;
            margin-bottom: 10px;
    }
    .check-date input{
            width: 100%;
            height: 50px;
            border: 1px solid #ebebeb;
            border-radius: 2px;
            font-size: 16px;
            color: #19191a;
            text-transform: uppercase;
            font-weight: 500;
            padding-left: 20px;
    }
    .check-date i{
            color: #dfa974;
            position: absolute;
            right: 18px;
            bottom: 17px;
    }
    </style>
<section class="contact-banner-area" id="contact">
    <div class="container h-100">
        <div class="contact-banner">
            <div class="text-center">
                <h1>Accomodation</h1>
                <nav aria-label="breadcrumb" class="banner-breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Accomodation</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- ================ end banner area ================= -->
<!-- ================ start banner form ================= -->
<form class="form-search form-search-position" asp-controller="Properties" asp-action="RoomAvailable" id="bookingForm" method="get">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 gutters-19 check-date">
                <label>Check In:</label>
                <input type="date" name="dateCome" id="checkIn" required />
            </div>
            <div class="col-lg-6 gutters-19 check-date">
                <label>Check Out:</label>
                <input type="date" name="dateGo" id="checkOut" required />
            </div>
            <div class="col-lg-6 gutters-19 check-date">
                <div class="col-sm">
                    <div class="form-group">
                        <div class="form-select-custom">
                            <select name="" id="">
                                <option value="" disabled selected>Number of People</option>
                                @for (int k = 1; k <= 4; k++)
                                {
                                    <option value="">@k</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 gutters-19" style="margin-top:20px">
                <div class="col-sm">
                    <div class="form-group">
                        <button class="button button-form">Check Avaibility</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form><!-- ================ end banner form ================= -->
<!-- ================ Explore section start ================= -->
<section class="section-margin section-margin--small">
    <div class="container">
        <div class="section-intro text-center pb-80px">
            <div class="section-intro__style">
                <img src="~/TemplateLayout/Page/img/home/bed-icon.png" alt="">
            </div>
            <h2>Explore Our Rooms</h2>
        </div>

        <div class="row pb-4">
            @{
                int i = 0;
            }
            @foreach(var category in Model.Categories)
            {
                i++;
                int capacity = int.Parse(category.CategoryID.ToString().Substring(category.CategoryID.ToString().Length - 2));
                string price = string.Format("{0:N0} VND", category.Price);
                <div class="col-md-6 col-xl-4 mb-5">
                    <div class="card card-explore">
                        <div class="card-explore__img">
                            <img class="card-img" src="~/TemplateLayout/Page/img/room/room-@(i).jpg" alt="">
                        </div>
                        <div class="card-body">
                            <h3 class="card-explore__price">@price <sub>/ Per Night</sub></h3>
                            <h4 class="card-explore__title"><a href="#">@category.TypeName</a></h4>
                            <p>Beginning fourth dominion creeping god was. Beginning, which fly yieldi dry beast moved blessed </p>
                            <h4 class="card-explore__title">Capacity: @capacity</h4>
                            <a class="card-explore__link" asp-action="Details" asp-controller="Properties" asp-route-id="@category.CategoryID">More Details <i class="ti-arrow-right"></i></a>
                        </div>
                    </div>
                </div>
            }            
        </div>
        <!-- Phân Trang -->
        <div class="row">
            <div class="col-md-12">
                @{
                    int prevPage = ViewBag.Page - 1;
                    if (prevPage <= 0)
                    {
                        prevPage = 1;
                    }
                    int nextPage = ViewBag.Page + 1;
                    if (nextPage > ViewBag.NoOfPages)
                    {
                        nextPage = ViewBag.NoOfPages;

                    }
                }
                <ul class="pagination justify-content-center">
                    <li class="page-item">
                        <a class="page-link @(ViewBag.Page == 1 ? "disabled" : "")" href="/properties/index?page=@prevPage" style="color:rgb(223, 169, 116)">
                            Prev
                        </a>
                    </li>
                    @for (int j = 1; j <= ViewBag.NoOfPages; j++)
                    {
                        <li class="page-item @(j == ViewBag.Page)">
                            <a class="page-link" href="/properties/index?page=@j" style=" color:rgb(223, 169, 116)">@j</a>
                        </li>
                    }
                    <li class="page-item">
                        <a class="page-link @(ViewBag.Page == ViewBag.NoOfPages ? "disabled" : "")" href="/properties/index?page=@nextPage" style="color:rgb(223, 169, 116)">
                            Next
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const checkInInput = document.getElementById("checkIn");
        const checkOutInput = document.getElementById("checkOut");
        const form = document.getElementById("bookingForm");


        const today = new Date().toISOString().split("T")[0];
        checkInInput.setAttribute("min", today);

        checkInInput.addEventListener("change", function () {
            if (checkInInput.value < today) {
                alert("Check-in date is not validated");
                checkInInput.value = today;
            }


            checkOutInput.setAttribute("min", checkInInput.value);
        });

        checkOutInput.addEventListener("change", function () {
            if (checkOutInput.value < checkInInput.value) {
                alert("Check-out date must greater than Check-in date ");
                checkOutInput.value = "";
            }
        });

        form.addEventListener("submit", function (event) {
            if (checkOutInput.value < checkInInput.value) {
                alert("Check-out date must greater than Check-in date");
                event.preventDefault(); // Ngăn form submit nếu có lỗi
            }
        });
    });
</script>
